<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê´€ë¦¬ì í˜ì´ì§€</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f6f6f6;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 1rem;
            text-align: center;
            position: relative;
        }
        main {
            max-width: 800px;
            margin: 2rem auto;
            background: white;
            padding: 2rem;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h2 {
            color: #34495e;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            margin: 1rem 0;
            padding: 1rem;
            background: #ecf0f1;
            border-radius: 5px;
        }
        .section-title {
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
        <button onclick="logout()" style="position: absolute; top: 1rem; right: 1rem; background-color: #e74c3c; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">
            ë¡œê·¸ì•„ì›ƒ
        </button>
    </header>
    <main>
        <section>
            <h2>ğŸš¨ ì‹ ê³ ëœ ê²Œì‹œê¸€</h2>
            <ul>
                {% for board in reported_boards %}
                    <li>
                        <strong>ê²Œì‹œê¸€ ì œëª©: {{ board.title }}</strong><br>
                        ê²Œì‹œê¸€ ë‚´ìš©: {{ board.content }}<br>
                        ê²Œì‹œê¸€ ì‹ ê³  ìˆ˜: {{ board.report }}<br>
                        ê²Œì‹œê¸€ ì‘ì„±ì: {{ board.author }}
                        <form action="{{ url_for('admin.delete_post', post_id=board.id) }}" method="post" onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                            <button type="submit">âŒ ê²Œì‹œê¸€ ì‚­ì œ</button>
                        </form>
                    </li>
                {% else %}
                    <li>ì‹ ê³ ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
                {% endfor %}
            </ul>
        </section>

        <section class="section-title">
            <h2>ğŸ’¬ ì‹ ê³ ëœ ëŒ“ê¸€</h2>
            <ul>
                {% for comment in reported_comments %}
                    <li>
                        <strong>ê²Œì‹œê¸€ ì œëª©: {{ comment.board_title }}</strong><br>
                        ê²Œì‹œê¸€ ì‘ì„±ì: {{ comment.board_author }}<br>
                        ëŒ“ê¸€ ë‚´ìš©: {{ comment.content }}<br>
                        ëŒ“ê¸€ ì‹ ê³  ìˆ˜: {{ comment.report }}<br>
                        ëŒ“ê¸€ ì‘ì„±ì: {{ comment.author }}
                    </li>
                {% else %}
                    <li>ì‹ ê³ ëœ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
                {% endfor %}
            </ul>
        </section>

        <section class="section-title">
            <h2>ğŸŒ± ë†ì¥ ì¶”ê°€ ìŠ¹ì¸</h2>
            <ul>
                <li>ë†ì¥ ì¶”ê°€ ì‹ ì²­ ëª©ë¡ ë³´ê¸°</li>
                <li>ìŠ¹ì¸ / ê±°ë¶€ ì„ íƒ</li>
            </ul>
        </section>
        
        <section class="pending-farms">
            {% if pending_farms %}
                {% for farm in pending_farms %}
                    <div class="farm-card">
                        <p><strong>ë†ì¥ ì´ë¦„:</strong> {{ farm.name }}</p>
                        <p><strong>ìœ„ì¹˜:</strong> {{ farm.location }}</p>
                        <p><strong>ì†Œìœ ì:</strong> {{ farm.owner_username }}</p>
                        <p><strong>ì¦ëª… ì„œë¥˜:</strong> 
                            <a href="{{ url_for('static', filename=farm.document_url) }}" target="_blank">[ë¬¸ì„œ ë³´ê¸°]</a>
                        </p>
                        <form action="{{ url_for('admin.approve_farm', farm_id=farm.id) }}" method="post" style="display:inline;">
                            <button type="submit" class="approve-btn">âœ… ìŠ¹ì¸</button>
                        </form>
                        <form action="{{ url_for('admin.reject_farm', farm_id=farm.id) }}" method="post" style="display:inline;">
                            <button type="submit" class="reject-btn">âŒ ê±°ë¶€</button>
                        </form>
                    </div>
                {% endfor %}
            {% else %}
                <p>í˜„ì¬ ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ë†ì¥ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            {% endif %}
        </section>
    </main>

    <script>
    function logout() {
        fetch("/logout", {
            method: "POST",
            credentials: "include"
        })
        .then(res => res.json())
        .then(data => {
            if (data.success) {
                alert(data.message);
                window.location.href = "http://localhost:3000/login";  // ë¡œê·¸ì¸ í˜ì´ì§€ ê²½ë¡œì— ë§ê²Œ ìˆ˜ì •
            } else {
                alert("ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨");
            }
        })
        .catch(err => {
            alert("ì—ëŸ¬ ë°œìƒ");
        });
    }
    </script>
</body>
</html>
